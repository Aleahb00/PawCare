{% extends 'base.html' %}
{% load static %}
{% block content %}
<link rel="stylesheet" href="{% static 'css/community.css' %}">

{% include 'navbar.html' %}
<section class="community-page">
    <a href="javascript:history.back()">Go Back</a>

    {% if posts %}
        {% for post in posts %}
        <div class="task">
            <div class="tags">
                <span class="tag">{{ post.title }}</span>

                {%if user == post.author%}
                <a class="options" href="{% url 'edit-post' post.id%}">
                <svg xml:space="preserve" viewBox="0 0 41.915 41.916" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" id="Capa_1" version="1.1" fill="#000000"><g stroke-width="0" id="SVGRepo_bgCarrier"></g><g stroke-linejoin="round" stroke-linecap="round" id="SVGRepo_tracerCarrier"></g><g id="SVGRepo_iconCarrier"> <g> <g> <path d="M11.214,20.956c0,3.091-2.509,5.589-5.607,5.589C2.51,26.544,0,24.046,0,20.956c0-3.082,2.511-5.585,5.607-5.585 C8.705,15.371,11.214,17.874,11.214,20.956z"></path> <path d="M26.564,20.956c0,3.091-2.509,5.589-5.606,5.589c-3.097,0-5.607-2.498-5.607-5.589c0-3.082,2.511-5.585,5.607-5.585 C24.056,15.371,26.564,17.874,26.564,20.956z"></path> <path d="M41.915,20.956c0,3.091-2.509,5.589-5.607,5.589c-3.097,0-5.606-2.498-5.606-5.589c0-3.082,2.511-5.585,5.606-5.585 C39.406,15.371,41.915,17.874,41.915,20.956z"></path> </g> </g> </g></svg>
                </a>
                {%endif%}
            </div>
            <p>{{ post.content|truncatewords:50 }}</p>
            <div class="stats">
                <div>
                    <div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><g stroke-width="0" id="SVGRepo_bgCarrier"></g><g stroke-linejoin="round" stroke-linecap="round" id="SVGRepo_tracerCarrier"></g><g id="SVGRepo_iconCarrier"> <path stroke-linecap="round" stroke-width="2" d="M12 8V12L15 15"></path> <circle stroke-width="2" r="9" cy="12" cx="12"></circle> </g></svg>{{post.created_at}}</div>

                    <a href="{% url 'post-details' post.id %}">
                        <div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><g stroke-width="0" id="SVGRepo_bgCarrier"></g><g stroke-linejoin="round" stroke-linecap="round" id="SVGRepo_tracerCarrier"></g><g id="SVGRepo_iconCarrier"> <path stroke-linejoin="round" stroke-linecap="round" stroke-width="1.5" d="M16 10H16.01M12 10H12.01M8 10H8.01M3 10C3 4.64706 5.11765 3 12 3C18.8824 3 21 4.64706 21 10C21 15.3529 18.8824 17 12 17C11.6592 17 11.3301 16.996 11.0124 16.9876L7 21V16.4939C4.0328 15.6692 3 13.7383 3 10Z"></path> </g></svg>18</div>
                    </a>
                </div>
            </div>
        </div>
        {% endfor %}
    {% else %}
        <p class="text-muted">No posts yet. Be the first to share!</p>
    {% endif %}

</section>
<!-- <a href="javascript:history.back()">Go Back</a>

<div class="container mt-5 community-post">
    <div class="row">
        <div class="col-md-8 offset-md-2">
            <h1>Community Posts</h1>

            {% if posts %}
                {% for post in posts %}
                    <div>
                        <div class="post-box">
                            <h5 class="card-title">{{ post.title }}</h5>
                            <p class="card-text text-muted">By {{ post.author }} on {{ post.created_at }}</p>
                            <p class="card-text">{{ post.content|truncatewords:50 }}</p>
                            <a href="{% url 'post-details' post.id %}">More</a>

                            {%if user == post.author%}
                                <a href="{% url 'edit-post' post.id%}"> Edit </a>
                                <a href="{% url 'delete-post' post.id%}" onclick="return confirm('Are you sure you want to delete this item?');"> Delete </a>
                            {%endif%}
                        </div>
                    </div>
                {% endfor %}
            {% else %}
                <p class="text-muted">No posts yet. Be the first to share!</p>
            {% endif %}
        </div>
    </div>
</div> -->
<!-- 
{% if user.is_authenticated %}
<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#createPostModal"
    action="{% url 'community' %}">Create Post</button>
{% endif %}

<div class="modal fade" id="createPostModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">

            <form method="POST" action="{% url 'community' %}">
                {% csrf_token %}
                <div class="modal-header">
                    <h5 class="modal-title">Create Post</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal">x</button>
                </div>
                <div class="modal-body">

                {% for field in form %}
                    {{field}}
                {% endfor %}
                </div>

                <div class="modal-footer">
                    <button type="submit" class="btn btn-success">Post</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                </div>
            </form>
        </div>
    </div>
</div> -->
<section>





</section>


{% endblock %}